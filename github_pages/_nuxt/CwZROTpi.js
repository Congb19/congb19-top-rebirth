import{G as w,E as d,z as N,N as b,h as x,O as C,c as u,o as n,b as B,w as c,j as T,K as s,q as R,d as p,n as V,a as D,i as h,t as f,F as z,l as E}from"./CX-k2Hzx.js";import{_ as F}from"./D1rm9Kjn.js";const M=g=>{const o=w(),a=d("ready"),i=d();let t=d([0,0]);const m=N(()=>t.value[1]>t.value[0]?t.value[1]-t.value[0]:0),l=()=>{const v=Math.random()*5;a.value="waiting",i.value=setTimeout(()=>{a.value="testing",t.value[0]=Number(Date.now())},3e3+v*1e3)},r=async()=>{a.value==="ready"||a.value==="waiting"?(e(),o.add({title:"抢跑了！",timeout:2e3})):a.value==="testing"&&(t.value[1]=Number(Date.now()),await b(),g(Number(m.value)),e())},e=()=>{clearTimeout(i.value),a.value="ready",t.value[0]=0,t.value[1]=0};return{status:a,start:l,trig:r}},U={class:"cb-reaction"},j={key:0},K=x({__name:"reaction",setup(g){const o=C([]),a=d(0),i=r=>{a.value=r,o.unshift(r)},{status:t,start:m,trig:l}=M(i);return(r,e)=>{const v=R,y=F;return n(),u("div",U,[B(y,null,{header:c(()=>e[1]||(e[1]=[p(" 请在点击“开始”按钮开始测试。下方方块变为绿色时，迅速点击它！ ")])),footer:c(()=>[D("div",null,"最新一次成绩："+f(s(a))+" ms",1),s(o).length>0?(n(),u("div",j,[e[3]||(e[3]=p(" 历史记录：")),(n(!0),u(z,null,E(s(o),(_,k)=>(n(),u("span",{key:k},f(_)+" ms ",1))),128))])):h("",!0)]),default:c(()=>[s(t)==="ready"?(n(),T(v,{key:0,onClick:s(m)},{default:c(()=>e[2]||(e[2]=[p("开始")])),_:1},8,["onClick"])):(n(),u("div",{key:1,class:V(["cb-reaction-board",{waiting:s(t)==="waiting",testing:s(t)==="testing"}]),onMousedown:e[0]||(e[0]=(..._)=>s(l)&&s(l)(..._))},null,34))]),_:1})])}}});export{K as _};
